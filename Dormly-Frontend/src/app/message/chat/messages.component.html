<app-dashboard-navbar></app-dashboard-navbar>
<div class="flex h-[calc(100vh-64px)]">
  <!-- Sidebar Component -->
  <app-sidebarmessage></app-sidebarmessage>

  <!-- Chat Content -->
  <div class="flex-1 flex flex-col bg-white">
    <!-- Chat Header -->
    <div class="h-16 px-4 border-b flex items-center">
      <div class="flex items-center space-x-3">
        <div class="relative">
          <img
            src="https://placehold.co/40x40"
            alt="Alice"
            class="w-10 h-10 rounded-full object-cover"
          >
          <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></div>
        </div>
        <div>
          <h2 class="font-semibold text-gray-900">Alice Cooper</h2>
          <p class="text-xs text-green-600">Online</p>
        </div>
      </div>
    </div>

    <!-- Chat Messages -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
     <div *ngIf = "returnedInbox">
     <div *ngFor = "let message of thread.messages">
    <ng-container *ngIf = "message.sender !== findUser(); else SentMessage"> <!--if the message does not equal to the authenticated user-->
      <!-- Received Message -->
      <div class="flex items-start space-x-2 max-w-xl">
        <img
          src="https://placehold.co/32x32"
          alt="Alice"
          class="w-8 h-8 rounded-full object-cover"
        >
        <div>
          <div class="bg-white rounded-2xl p-3 shadow-sm">
            <p class="text-gray-800">{{message.message}}</p>
          </div>
          <span class="text-xs text-gray-500 ml-2 mt-1 inline-block">{{message.timestamp}}</span>
        </div>
      </div>
    </ng-container>
      <!-- Sent Message -->
       <ng-template #SentMessage>
      <div class="flex items-start justify-end space-x-2 max-w-xl ml-auto">
        <div class="flex flex-col items-end">
          <div class="bg-blue-500 text-white rounded-2xl p-3 shadow-sm">
            <p>{{message.message}}</p>
          </div>
          <span class="text-xs text-gray-500 mr-2 mt-1 inline-block">{{message.timestamp}}</span>
        </div>
        <img
          src="https://placehold.co/32x32"
          alt="Me"
          class="w-8 h-8 rounded-full object-cover"
        >
      </div>
      </ng-template>

    </div>
    </div>
    

   

    <!-- Chat Input -->
    <div class="px-4 py-3 bg-white border-t">
      <div class="flex items-center space-x-2">
        <label for="file-upload" class="cursor-pointer p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors">
          <input id="file-upload" type="file" class="hidden" multiple>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
          </svg>
        </label>
        <div class="flex-1 relative">
          <input
            type="text"
            placeholder="Type your message..."
            class="w-full p-2 pl-4 pr-12 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          >
        </div>
        <button class="p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
  </div>
